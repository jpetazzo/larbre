interfaces {
    ethernet eth0 {
        address "10.0.0.4/24"
        address "10.0.0.1/24"
        description "LAN"
        hw-id "bc:24:11:66:93:01"
        ipv6 {
            address {
                eui64 "fdfd::/64"
            }
        }
        offload {
            gro
            gso
            sg
            tso
        }
    }
    ethernet eth1 {
        address "dhcp"
        description "WAN1"
        dhcpv6-options {
            pd 1 {
                interface eth0 {
                    address "1"
                }
                length "64"
            }
        }
        hw-id "bc:24:11:b6:e8:0f"
        ipv6 {
            address {
                autoconf
            }
        }
        offload {
            gro
            gso
            sg
            tso
        }
    }
    ethernet eth2 {
        address "dhcp"
        description "WAN2"
        dhcpv6-options {
            pd 2 {
                interface eth0 {
                    address "2"
                }
                length "64"
            }
        }
        hw-id "bc:24:11:7c:66:14"
        ipv6 {
            address {
                autoconf
            }
        }
        offload {
            gro
            gso
            sg
            tso
        }
    }
    loopback lo {
    }
}
load-balancing {
    wan {
        enable-local-traffic
        interface-health eth1 {
            nexthop "dhcp"
        }
        interface-health eth2 {
            nexthop "dhcp"
        }
        rule 1 {
            inbound-interface "eth0"
            interface eth1 {
            }
            interface eth2 {
            }
        }
    }
}
nat {
    source {
        rule 100 {
            outbound-interface {
                name "eth1"
            }
            source {
                address "10.0.0.0/24"
            }
            translation {
                address "masquerade"
            }
        }
        rule 102 {
            outbound-interface {
                name "eth1"
            }
            source {
                address "192.168.2.0/24"
            }
            translation {
                address "masquerade"
            }
        }
        rule 200 {
            outbound-interface {
                name "eth2"
            }
            source {
                address "10.0.0.0/24"
            }
            translation {
                address "masquerade"
            }
        }
        rule 201 {
            outbound-interface {
                name "eth2"
            }
            source {
                address "192.168.1.0/24"
            }
            translation {
                address "masquerade"
            }
        }
    }
}
nat66 {
    source {
        rule 1 {
            outbound-interface {
                name "eth1"
            }
            source {
                prefix "fdfd::/64"
            }
            translation {
                address "masquerade"
            }
        }
        rule 2 {
            outbound-interface {
                name "eth2"
            }
            source {
                prefix "fdfd::/64"
            }
            translation {
                address "masquerade"
            }
        }
    }
}
service {
    dhcp-server {
        shared-network-name LAN {
            subnet 10.0.0.0/24 {
                lease "86400"
                option {
                    default-router "10.0.0.1"
                    domain-name "larb.re"
                    name-server "10.0.0.1"
                }
                range 0 {
                    start "10.0.0.9"
                    stop "10.0.0.99"
                }
                subnet-id "1"
            }
        }
    }
    dns {
        forwarding {
            allow-from "10.0.0.0/24"
            allow-from "127.0.0.0/8"
            cache-size "0"
            listen-address "10.0.0.1"
            listen-address "127.0.0.1"
        }
    }
    ntp {
        allow-client {
            address "127.0.0.0/8"
            address "169.254.0.0/16"
            address "10.0.0.0/8"
            address "172.16.0.0/12"
            address "192.168.0.0/16"
            address "::1/128"
            address "fe80::/10"
            address "fc00::/7"
        }
        server time1.vyos.net {
        }
        server time2.vyos.net {
        }
        server time3.vyos.net {
        }
    }
    router-advert {
        interface eth0 {
            prefix fdfd::/64 {
            }
        }
    }
    ssh {
        port "22"
    }
}
system {
    config-management {
        commit-revisions "100"
    }
    console {
        device ttyS0 {
            speed "115200"
        }
    }
    domain-name "larb.re"
    host-name "vyos"
    login {
        user vyos {
            authentication {
                encrypted-password "$6$rounds=656000$WsBWSVpvq7pZGXZE$/0QKMmwnMJh6WmRgQoETkEqtHGq8MSFySXpH9SZQJ8DcO.sFTiq0imStZX61edqjSLeYJhK2A09iohVm/Ip0U0"
                plaintext-password ""
                public-keys jpetazzo {
                    key "AAAAB3NzaC1yc2EAAAADAQABAAABAQDxLXAXB3CUztORPd+SCEcxhSGakSqecCgtCQTK3owuOKnG9LAYsXFDc7DLGoWzhnYeU9fVkKuMh6aDXYCHJmjSyK5V7f+VVxrH/6kf2VrIK+bGglHbPxNVLS1/UsSEzdZdP0vFwoBoGjAFNFEcn0NXKAvtNlMsyakvjfrpuPIFrb7xkrZHhvezNKrG3Sx6lQ2RaSFFGJSTPOWQg/q8DsCv0D1T7RaR1oHrrb6KKQAWjGYoU75/zNN6x7nD/ITQe7JGNPS3JbqXqXj7WtM4Wm0FHF5CthEKecbyxCFGxhpNBwXN2GzNkItQkeans+pn6/g6lstWIT/ugddoxW3CvQt1"
                    type "ssh-rsa"
                }
            }
        }
    }
    name-server "127.0.0.1"
    syslog {
        global {
            facility all {
                level "info"
            }
            facility local7 {
                level "debug"
            }
        }
    }
}


// Warning: Do not remove the following line.
// vyos-config-version: "bgp@5:broadcast-relay@1:cluster@2:config-management@1:conntrack@5:conntrack-sync@2:container@2:dhcp-relay@2:dhcp-server@11:dhcpv6-server@5:dns-dynamic@4:dns-forwarding@4:firewall@16:flow-accounting@1:https@6:ids@1:interfaces@33:ipoe-server@4:ipsec@13:isis@3:l2tp@9:lldp@2:mdns@1:monitoring@1:nat@8:nat66@3:ntp@3:openconnect@3:openvpn@4:ospf@2:pim@1:policy@8:pppoe-server@11:pptp@5:qos@2:quagga@11:reverse-proxy@1:rip@1:rpki@2:salt@1:snmp@3:ssh@2:sstp@6:system@27:vrf@3:vrrp@4:vyos-accel-ppp@2:wanloadbalance@3:webproxy@2"
// Release version: 1.5-stream-2025-Q1
